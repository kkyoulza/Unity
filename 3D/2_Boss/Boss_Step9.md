# Step 9. 스테이지 설정

이제는 던전 형식으로 NPC에게 말을 걸어 들어가는 던전에 대한 설정을 하도록 하겠다.

<hr>

### 던전 구상

- 던전은 N개의 방으로 이루어 지도록 구성한다.
- 방마다 적이 스폰되어 해당 적들을 퇴치하게 되면 다음 방 문이 열리는 방식이다.

![image](https://user-images.githubusercontent.com/66288087/200790494-c82c6d26-8b3a-48b5-b708-17e3e24b2d3c.png)

일자형 던전의 모습이다.

#### 스폰 방식

- 스폰 방식은 돌을 스폰하는 것과 유사하게 빈 오브젝트를 만들어 플레이어가 닿게 되면 몬스터가 스폰되게끔 해 주도록 하겠다.
- Trigger 반응시 몬스터를 스폰하는 것은 빈 오브젝트에서 코드로 만들어 관리를 해 줄 예정이다. (OnTriggerEnter)
- 던전 매니저를 만들어 해당 부분에서 잡힌 몬스터의 수를 계수하여 or 일정 지역에서 생존하고 있는 몬스터가 0마리가 되면 문이 열리게끔 할 예정이다.
- 사냥터와 같이 꾸준하게 n마리의 몬스터를 유지하는 컴포넌트도 개발할 것

<hr>

+ 단순히 코드로 1회성 기능을 개발하는 것이 아닌, 재사용할 수 있는 컴포넌트를 개발한다고 생각할 것

<hr>

#### 스폰 컴포넌트

스폰 컴포넌트는 BoxCollider를 Trigger로 해 두어 mob의 Trigger와 반응하여 현재 방에 소환된 몬스터의 개수를 파악한 다음, 몬스터를 잡게 되면 한 마리씩 줄여 나가는 식으로 한다.








